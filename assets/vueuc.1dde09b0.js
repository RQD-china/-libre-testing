import{o as X,a as K}from"./evtd.5b1ed12a.js";import{f as de,d as ee,p as Y,b as Se}from"./seemly.09647d42.js";import{b as ze,F as fe,C as Te,d as O,p as Ee,x as Ae,i as Z,r as F,g as R,s as he,t as N,f as L,k as E,B as Fe,m as _,w as H,q as ce,I as pe,J as Ie,n as Be}from"./@vue.e5e98381.js";import{u as j}from"./@css-render.58f09b3e.js";import{e as Oe,u as G,o as ke,i as We}from"./vooks.92a4234c.js";import{z as Ce}from"./vdirs.03f40802.js";import{i as Le}from"./resize-observer-polyfill.8deb1e21.js";import{C as Ve}from"./css-render.d5050412.js";function J(n,e,t="default"){const r=e[t];if(r===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);return r()}function Q(n,e=!0,t=[]){return n.forEach(r=>{if(r!==null){if(typeof r!="object"){(typeof r=="string"||typeof r=="number")&&t.push(ze(String(r)));return}if(Array.isArray(r)){Q(r,e,t);return}if(r.type===fe){if(r.children===null)return;Array.isArray(r.children)&&Q(r.children,e,t)}else r.type!==Te&&t.push(r)}}),t}function te(n,e,t="default"){const r=e[t];if(r===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);const i=Q(r());if(i.length===1)return i[0];throw new Error(`[vueuc/${n}]: slot[${t}] should have exactly one child.`)}let W=null;function me(){if(W===null&&(W=document.getElementById("v-binder-view-measurer"),W===null)){W=document.createElement("div"),W.id="v-binder-view-measurer";const{style:n}=W;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(W)}return W.getBoundingClientRect()}function He(n,e){const t=me();return{top:e,left:n,height:0,width:0,right:t.width-n,bottom:t.height-e}}function U(n){const e=n.getBoundingClientRect(),t=me();return{left:e.left-t.left,top:e.top-t.top,bottom:t.height+t.top-e.bottom,right:t.width+t.left-e.right,width:e.width,height:e.height}}function Xe(n){return n.nodeType===9?null:n.parentNode}function ve(n){if(n===null)return null;const e=Xe(n);if(e===null)return null;if(e.nodeType===9)return document;if(e.nodeType===1){const{overflow:t,overflowX:r,overflowY:i}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+i+r))return e}return ve(e)}const Ye=O({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var e;Ee("VBinder",(e=Ae())===null||e===void 0?void 0:e.proxy);const t=Z("VBinder",null),r=F(null),i=o=>{r.value=o,t&&n.syncTargetWithParent&&t.setTargetRef(o)};let d=[];const c=()=>{let o=r.value;for(;o=ve(o),o!==null;)d.push(o);for(const v of d)K("scroll",v,$,!0)},g=()=>{for(const o of d)X("scroll",o,$,!0);d=[]},f=new Set,p=o=>{f.size===0&&c(),f.has(o)||f.add(o)},M=o=>{f.has(o)&&f.delete(o),f.size===0&&g()},$=()=>{de(s)},s=()=>{f.forEach(o=>o())},u=new Set,b=o=>{u.size===0&&K("resize",window,l),u.has(o)||u.add(o)},m=o=>{u.has(o)&&u.delete(o),u.size===0&&X("resize",window,l)},l=()=>{u.forEach(o=>o())};return R(()=>{X("resize",window,l),g()}),{targetRef:r,setTargetRef:i,addScrollListener:p,removeScrollListener:M,addResizeListener:b,removeResizeListener:m}},render(){return J("binder",this.$slots)}});var at=Ye,dt=O({name:"Target",setup(){const{setTargetRef:n,syncTarget:e}=Z("VBinder");return{syncTarget:e,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:e}=this;return n?he(te("follower",this.$slots),[[e]]):te("follower",this.$slots)}});function ne(n,e){console.error(`[vueuc/${n}]: ${e}`)}const{c:B}=Ve(),P="vueuc-style";function re(n){return n&-n}class De{constructor(e,t){this.l=e,this.min=t;const r=new Array(e+1);for(let i=0;i<e+1;++i)r[i]=0;this.ft=r}add(e,t){if(t===0)return;const{l:r,ft:i}=this;for(e+=1;e<=r;)i[e]+=t,e+=re(e)}get(e){return this.sum(e+1)-this.sum(e)}sum(e){if(e===0)return 0;const{ft:t,min:r,l:i}=this;if(e===void 0&&(e=i),e>i)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let d=e*r;for(;e>0;)d+=t[e],e-=re(e);return d}getBound(e){let t=0,r=this.l;for(;r>t;){const i=Math.floor((t+r)/2),d=this.sum(i);if(d>e){r=i;continue}else if(d<e){if(t===i)return this.sum(t+1)<=e?t+1:i;t=i}else return i}return t}}function oe(n){return typeof n=="string"?document.querySelector(n):n()}var Ne=O({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(n){return{showTeleport:Oe(N(n,"show")),mergedTo:L(()=>{const{to:e}=n;return e!=null?e:"body"})}},render(){return this.showTeleport?this.disabled?J("lazy-teleport",this.$slots):E(Fe,{disabled:this.disabled,to:this.mergedTo},J("lazy-teleport",this.$slots)):null}});const D={top:"bottom",bottom:"top",left:"right",right:"left"},ie={start:"end",center:"center",end:"start"},q={top:"height",bottom:"height",left:"width",right:"width"},_e={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},je={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},Pe={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},le={top:!0,bottom:!1,left:!0,right:!1},se={top:"end",bottom:"start",left:"end",right:"start"};function Ue(n,e,t,r,i,d){if(!i||d)return{placement:n,top:0,left:0};const[c,g]=n.split("-");let f=g!=null?g:"center",p={top:0,left:0};const M=(u,b,m)=>{let l=0,o=0;const v=t[u]-e[b]-e[u];return v>0&&r&&(m?o=le[b]?v:-v:l=le[b]?v:-v),{left:l,top:o}},$=c==="left"||c==="right";if(f!=="center"){const u=Pe[n],b=D[u],m=q[u];if(t[m]>e[m]){if(e[u]+e[m]<t[m]){const l=(t[m]-e[m])/2;e[u]<l||e[b]<l?e[u]<e[b]?(f=ie[g],p=M(m,b,$)):p=M(m,u,$):f="center"}}else t[m]<e[m]&&e[b]<0&&e[u]>e[b]&&(f=ie[g])}else{const u=c==="bottom"||c==="top"?"left":"top",b=D[u],m=q[u],l=(t[m]-e[m])/2;(e[u]<l||e[b]<l)&&(e[u]>e[b]?(f=se[u],p=M(m,u,$)):(f=se[b],p=M(m,b,$)))}let s=c;return e[c]<t[q[c]]&&e[c]<e[D[c]]&&(s=D[c]),{placement:f!=="center"?`${s}-${f}`:s,left:p.left,top:p.top}}function qe(n,e){return e?je[n]:_e[n]}function Ke(n,e,t,r,i,d){if(d)switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"top-end":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"left-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+i)}px`,transform:""};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width+i)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+i)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width+i)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width+i)}px`,transform:""};case"right-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width+i)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+i)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+i)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width/2+i)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2+r)}px`,left:`${Math.round(t.left-e.left+t.width+i)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2+r)}px`,left:`${Math.round(t.left-e.left+i)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width/2+i)}px`,transform:"translateX(-50%)"}}}const Ge=B([B(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),B(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[B("> *",{pointerEvents:"all"})])]);var ft=O({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const e=Z("VBinder"),t=G(()=>n.enabled!==void 0?n.enabled:n.show),r=F(null),i=F(null),d=()=>{const{syncTrigger:s}=n;s.includes("scroll")&&e.addScrollListener(f),s.includes("resize")&&e.addResizeListener(f)},c=()=>{e.removeScrollListener(f),e.removeResizeListener(f)};_(()=>{t.value&&(f(),d())});const g=j();Ge.mount({id:"vueuc/binder",head:!0,anchorMetaName:P,ssr:g}),R(()=>{c()}),ke(()=>{t.value&&f()});const f=()=>{if(!t.value)return;const s=r.value;if(s===null)return;const u=e.targetRef,{x:b,y:m,overlap:l}=n,o=b!==void 0&&m!==void 0?He(b,m):U(u);s.style.setProperty("--v-target-width",`${Math.round(o.width)}px`),s.style.setProperty("--v-target-height",`${Math.round(o.height)}px`);const{width:v,minWidth:z,placement:I,internalShift:h,flip:a}=n;s.setAttribute("v-placement",I),l?s.setAttribute("v-overlap",""):s.removeAttribute("v-overlap");const{style:w}=s;v==="target"?w.width=`${o.width}px`:v!==void 0?w.width=v:w.width="",z==="target"?w.minWidth=`${o.width}px`:z!==void 0?w.minWidth=z:w.minWidth="";const x=U(s),S=U(i.value),{left:T,top:y,placement:A}=Ue(I,o,x,h,a,l),k=qe(A,l),{left:xe,top:$e,transform:Me}=Ke(A,S,o,y,T,l);s.setAttribute("v-placement",A),s.style.setProperty("--v-offset-left",`${Math.round(T)}px`),s.style.setProperty("--v-offset-top",`${Math.round(y)}px`),s.style.transform=`translateX(${xe}) translateY(${$e}) ${Me}`,s.style.transformOrigin=k};H(t,s=>{s?(d(),p()):c()});const p=()=>{ce().then(f).catch(s=>console.error(s))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(s=>{H(N(n,s),f)}),["teleportDisabled"].forEach(s=>{H(N(n,s),p)}),H(N(n,"syncTrigger"),s=>{s.includes("resize")?e.addResizeListener(f):e.removeResizeListener(f),s.includes("scroll")?e.addScrollListener(f):e.removeScrollListener(f)});const M=We(),$=G(()=>{const{to:s}=n;if(s!==void 0)return s;M.value});return{VBinder:e,mergedEnabled:t,offsetContainerRef:i,followerRef:r,mergedTo:$,syncPosition:f}},render(){return E(Ne,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var n,e;const t=E("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[E("div",{class:"v-binder-follower-content",ref:"followerRef"},(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n))]);return this.zindexable?he(t,[[Ce,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):t}})}});class Je{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new Le(this.handleResize),this.elHandlersMap=new Map}handleResize(e){for(const t of e){const r=this.elHandlersMap.get(t.target);r!==void 0&&r(t)}}registerHandler(e,t){this.elHandlersMap.set(e,t),this.observer.observe(e)}unregisterHandler(e){!this.elHandlersMap.has(e)||(this.elHandlersMap.delete(e),this.observer.unobserve(e))}}var ue=new Je,ae=O({name:"ResizeObserver",props:{onResize:Function},setup(n){return{registered:!1,handleResize(e){const{onResize:t}=n;t!==void 0&&t(e)}}},mounted(){const n=this.$el;if(n===void 0){ne("resize-observer","$el does not exist.");return}if(n.nextElementSibling!==n.nextSibling&&n.nodeType===3&&n.nodeValue!==""){ne("resize-observer","$el can not be observed (it may be a text node).");return}n.nextElementSibling!==null&&(ue.registerHandler(n.nextElementSibling,this.handleResize),this.registered=!0)},beforeUnmount(){this.registered&&ue.unregisterHandler(this.$el.nextElementSibling)},render(){return pe(this.$slots,"default")}});const Qe=B(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[B("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[B("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]);var ht=O({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(n){const e=j();Qe.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:P,ssr:e}),_(()=>{const{defaultScrollIndex:h,defaultScrollKey:a}=n;h!=null?$({index:h}):a!=null&&$({key:a})}),Ie(()=>{$({top:f.value})});const t=L(()=>{const h=new Map,{keyField:a}=n;return n.items.forEach((w,x)=>{h.set(w[a],x)}),h}),r=F(null),i=F(void 0),d=new Map,c=L(()=>{const{items:h,itemSize:a,keyField:w}=n,x=new De(h.length,a);return h.forEach((S,T)=>{const y=S[w],A=d.get(y);A!==void 0&&x.add(T,A)}),x}),g=F(0),f=F(0),p=G(()=>Math.max(c.value.getBound(f.value-ee(n.paddingTop))-1,0)),M=L(()=>{const{value:h}=i;if(h===void 0)return[];const{items:a,itemSize:w}=n,x=p.value,S=Math.min(x+Math.ceil(h/w+1),a.length-1),T=[];for(let y=x;y<=S;++y)T.push(a[y]);return T}),$=h=>{const{left:a,top:w,index:x,key:S,position:T,behavior:y,debounce:A=!0}=h;if(a!==void 0||w!==void 0)u(a,w,y);else if(x!==void 0)s(x,y,A);else if(S!==void 0){const k=t.value.get(S);k!==void 0&&s(k,y,A)}else T==="bottom"?u(0,Number.MAX_SAFE_INTEGER,y):T==="top"&&u(0,0,y)};function s(h,a,w){const{value:x}=c,S=x.sum(h)+ee(n.paddingTop);if(!w)r.value.scrollTo({left:0,top:S,behavior:a});else{const{scrollTop:T,offsetHeight:y}=r.value;if(S>T){const A=x.get(h);S+A<=T+y||r.value.scrollTo({left:0,top:S+A-y,behavior:a})}else r.value.scrollTo({left:0,top:S,behavior:a})}o=h}function u(h,a,w){r.value.scrollTo({left:h,top:a,behavior:w})}function b(h,a){var w;if(n.ignoreItemResize||I(a.target))return;const{value:x}=c,S=t.value.get(h),T=x.get(S),y=a.contentRect.height;if(y===T)return;y-n.itemSize===0?d.delete(h):d.set(h,y-n.itemSize);const k=y-T;k!==0&&(v!==void 0&&S<=v&&((w=r.value)===null||w===void 0||w.scrollBy(0,k)),x.add(S,k),g.value++)}function m(h){de(z);const{onScroll:a}=n;a!==void 0&&a(h)}function l(h){if(I(h.target)||h.contentRect.height===i.value)return;i.value=h.contentRect.height;const{onResize:a}=n;a!==void 0&&a(h)}let o,v;function z(){const{value:h}=r;h!=null&&(v=o!=null?o:p.value,o=void 0,f.value=r.value.scrollTop)}function I(h){let a=h;for(;a!==null;){if(a.style.display==="none")return!0;a=a.parentElement}return!1}return{listHeight:i,listStyle:{overflow:"auto"},keyToIndex:t,itemsStyle:L(()=>{const{itemResizable:h}=n,a=Y(c.value.sum());return g.value,[n.itemsStyle,{boxSizing:"content-box",height:h?"":a,minHeight:h?a:"",paddingTop:Y(n.paddingTop),paddingBottom:Y(n.paddingBottom)}]}),visibleItemsStyle:L(()=>(g.value,{transform:`translateY(${Y(c.value.sum(p.value))})`})),viewportItems:M,listElRef:r,itemsElRef:F(null),scrollTo:$,handleListResize:l,handleListScroll:m,handleItemResize:b}},render(){const{itemResizable:n,keyField:e,keyToIndex:t,visibleItemsTag:r}=this;return E(ae,{onResize:this.handleListResize},{default:()=>{var i,d;return E("div",Be(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.onWheel,ref:"listElRef"}),[this.items.length!==0?E("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[E(r,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(c=>{const g=c[e],f=t.get(g),p=this.$slots.default({item:c,index:f})[0];return n?E(ae,{key:g,onResize:M=>this.handleItemResize(g,M)},{default:()=>p}):(p.key=g,p)})})]):(d=(i=this.$slots).empty)===null||d===void 0?void 0:d.call(i)])}})}});const Ze=B(".v-x-scroll",{overflow:"auto",scrollbarWidth:"none"},[B("&::-webkit-scrollbar",{width:0,height:0})]);var ct=O({name:"XScroll",props:{disabled:Boolean,onScroll:Function},setup(){const n=F(null);function e(i){!(i.currentTarget.offsetWidth<i.currentTarget.scrollWidth)||i.deltaY===0||(i.currentTarget.scrollLeft+=i.deltaY+i.deltaX,i.preventDefault())}const t=j();return Ze.mount({id:"vueuc/x-scroll",head:!0,anchorMetaName:P,ssr:t}),Object.assign({selfRef:n,handleWheel:e},{scrollTo(...i){var d;(d=n.value)===null||d===void 0||d.scrollTo(...i)}})},render(){return E("div",{ref:"selfRef",onScroll:this.onScroll,onWheel:this.disabled?void 0:this.handleWheel,class:"v-x-scroll"},this.$slots)}});const C="v-hidden",Re=B("[v-hidden]",{display:"none!important"});var pt=O({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateOverflow:Function},setup(n,{slots:e}){const t=F(null),r=F(null);function i(){const{value:c}=t,{getCounter:g,getTail:f}=n;let p;if(g!==void 0?p=g():p=r.value,!c||!p)return;p.hasAttribute(C)&&p.removeAttribute(C);const{children:M}=c,$=c.offsetWidth,s=[],u=e.tail?f==null?void 0:f():null;let b=u?u.offsetWidth:0,m=!1;const l=c.children.length-(e.tail?1:0);for(let v=0;v<l-1;++v){if(v<0)continue;const z=M[v];if(m){z.hasAttribute(C)||z.setAttribute(C,"");continue}else z.hasAttribute(C)&&z.removeAttribute(C);const I=z.offsetWidth;if(b+=I,s[v]=I,b>$){const{updateCounter:h}=n;for(let a=v;a>=0;--a){const w=l-1-a;h!==void 0?h(w):p.textContent=`${w}`;const x=p.offsetWidth;if(b-=s[a],b+x<=$||a===0){m=!0,v=a-1,u&&(v===-1?(u.style.maxWidth=`${$-x}px`,u.style.boxSizing="border-box"):u.style.maxWidth="");break}}}}const{onUpdateOverflow:o}=n;m?o!==void 0&&o(!0):(o!==void 0&&o(!1),p.setAttribute(C,""))}const d=j();return Re.mount({id:"vueuc/overflow",head:!0,anchorMetaName:P,ssr:d}),_(i),{selfRef:t,counterRef:r,sync:i}},render(){const{$slots:n}=this;return ce(this.sync),E("div",{class:"v-overflow",ref:"selfRef"},[pe(n,"default"),n.counter?n.counter():E("span",{style:{display:"inline-block"},ref:"counterRef"}),n.tail?n.tail():null])}});function be(n){return n instanceof HTMLElement}function ge(n){for(let e=0;e<n.childNodes.length;e++){const t=n.childNodes[e];if(be(t)&&(ye(t)||ge(t)))return!0}return!1}function we(n){for(let e=n.childNodes.length-1;e>=0;e--){const t=n.childNodes[e];if(be(t)&&(ye(t)||we(t)))return!0}return!1}function ye(n){if(!et(n))return!1;try{n.focus()}catch{}return document.activeElement===n}function et(n){if(n.tabIndex>0||n.tabIndex===0&&n.getAttribute("tabIndex")!==null)return!0;if(n.getAttribute("disabled"))return!1;switch(n.nodeName){case"A":return!!n.href&&n.rel!=="ignore";case"INPUT":return n.type!=="hidden"&&n.type!=="file";case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}let V=[];const mt=O({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(n){const e=Se(),t=F(null),r=F(null);let i=!1,d=!1;const c=document.activeElement;function g(){return V[V.length-1]===e}function f(l){var o;l.code==="Escape"&&g()&&((o=n.onEsc)===null||o===void 0||o.call(n))}_(()=>{H(()=>n.active,l=>{l?($(),K("keydown",document,f)):(X("keydown",document,f),i&&s())},{immediate:!0})}),R(()=>{X("keydown",document,f),i&&s()});function p(l){if(!d&&g()){const o=M();if(o===null||o.contains(l.target))return;u("first")}}function M(){const l=t.value;if(l===null)return null;let o=l;for(;o=o.nextSibling,!(o===null||o instanceof Element&&o.tagName==="DIV"););return o}function $(){var l;if(!n.disabled){if(V.push(e),n.autoFocus){const{initialFocusTo:o}=n;o===void 0?u("first"):(l=oe(o))===null||l===void 0||l.focus()}i=!0,document.addEventListener("focus",p,!0)}}function s(){var l;if(n.disabled||(document.removeEventListener("focus",p,!0),V=V.filter(v=>v!==e),g()))return;const{finalFocusTo:o}=n;o!==void 0?(l=oe(o))===null||l===void 0||l.focus():n.returnFocusOnDeactivated&&c instanceof HTMLElement&&(d=!0,c.focus({preventScroll:!0}),d=!1)}function u(l){if(!!g()&&n.active){const o=t.value,v=r.value;if(o!==null&&v!==null){const z=M();if(z==null||z===v){d=!0,o.focus({preventScroll:!0}),d=!1;return}d=!0;const I=l==="first"?ge(z):we(z);d=!1,I||(d=!0,o.focus({preventScroll:!0}),d=!1)}}}function b(l){if(d)return;const o=M();o!==null&&(l.relatedTarget!==null&&o.contains(l.relatedTarget)?u("last"):u("first"))}function m(l){d||(l.relatedTarget!==null&&l.relatedTarget===t.value?u("last"):u("first"))}return{focusableStartRef:t,focusableEndRef:r,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:b,handleEndFocus:m}},render(){const{default:n}=this.$slots;if(n===void 0)return null;if(this.disabled)return n();const{active:e,focusableStyle:t}=this;return E(fe,null,[E("div",{"aria-hidden":"true",tabindex:e?"0":"-1",ref:"focusableStartRef",style:t,onFocus:this.handleStartFocus}),n(),E("div",{"aria-hidden":"true",style:t,ref:"focusableEndRef",tabindex:e?"0":"-1",onFocus:this.handleEndFocus})])}});export{mt as F,Ne as L,ae as V,ht as a,ft as b,dt as c,at as d,pt as e,ct as f};
